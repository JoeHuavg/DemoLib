{"remainingRequest":"C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\src\\views\\users\\roleusers\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\src\\views\\users\\roleusers\\index.vue","mtime":1630326254249},{"path":"C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Amazarashi\\Documents\\P_Project\\Clothes\\后台\\Design\\Meiam.System\\Meiam.System.Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _roles = require(\"@/api/users/roles\");\n\nvar _roleusers = require(\"@/api/users/roleusers\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'roleusers',\n  data: function data() {\n    return {\n      // 遮罩层\n      loadingRole: false,\n      loadingUser: false,\n      loadingRoleUser: false,\n      // 表格高度\n      tableHeight: window.innerHeight,\n      // 角色列表\n      dataRoleTable: [],\n      // 已添加用户列表\n      dataRoleUserTable: [],\n      // 未添加用户列表\n      dataUserTable: [],\n      // 勾选添加用户列表\n      addSelections: [],\n      // 勾选删除用户列表\n      delSelections: [],\n      // 过滤查询\n      search: '',\n      // 角色id\n      roleId: '',\n      // 是否显示弹出层\n      open: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // 获取角色列表\n    this.loadingRole = true;\n    (0, _roles.getRoles)().then(function (response) {\n      _this.dataRoleTable = response.data;\n\n      _this.handleRoleTableSelection(_this.dataRoleTable[0]);\n\n      _this.$refs.roleTable.setCurrentRow(_this.dataRoleTable[0]);\n\n      _this.loadingRole = false;\n    });\n  },\n  methods: {\n    // 获取角色用户\n    getRoleUser: function getRoleUser() {\n      var _this2 = this;\n\n      this.loadingRoleUser = true;\n      (0, _roleusers.getRoleUsers)(this.roleId).then(function (response) {\n        _this2.dataRoleUserTable = response.data;\n        _this2.loadingRoleUser = false;\n      });\n    },\n    // 删除角色用户\n    handleDelete: function handleDelete() {\n      var _this3 = this;\n\n      this.delSelections = [];\n      this.$refs.roleUserTable.selection.forEach(function (element) {\n        _this3.delSelections.push(element.userID);\n      });\n\n      if (this.delSelections.length === 0) {\n        return;\n      }\n\n      this.$confirm('是否确认删除选中的 ' + this.delSelections.length + ' 条数据?', '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        (0, _roleusers.deleteRoleUsers)({\n          roleId: _this3.roleId,\n          userIds: _this3.delSelections\n        }).then(function (response) {\n          if (response.statusCode === 200) {\n            _this3.$message({\n              message: '成功删除' + response.data + '条数据',\n              type: 'success'\n            });\n\n            _this3.getRoleUser();\n          }\n        });\n      }).catch(function () {});\n    },\n    // 选中角色\n    handleRoleTableSelection: function handleRoleTableSelection(row) {\n      this.roleId = row.id;\n      this.getRoleUser();\n    },\n    // 获取未添加角色列表\n    handleGetUserTable: function handleGetUserTable() {\n      var _this4 = this;\n\n      this.open = true;\n      this.loadingUser = true;\n      (0, _roleusers.getExcludeUsers)(this.roleId).then(function (response) {\n        _this4.dataUserTable = response.data;\n        _this4.loadingUser = false;\n      });\n    },\n    // 新增用户角色\n    handleSubmit: function handleSubmit() {\n      var _this5 = this;\n\n      this.addSelections = [];\n      this.$refs.userTable.selection.forEach(function (element) {\n        _this5.addSelections.push(element.userID);\n      });\n      (0, _roleusers.createRoleUsers)({\n        roleId: this.roleId,\n        userIds: this.addSelections\n      }).then(function (response) {\n        if (response.statusCode === 200) {\n          _this5.$message({\n            message: '成功添加' + response.data + '条数据',\n            type: 'success'\n          });\n\n          _this5.getRoleUser();\n\n          _this5.open = false;\n        }\n      });\n    },\n    cancel: function cancel() {\n      this.open = false;\n    }\n  }\n};\nexports.default = _default;",null]}